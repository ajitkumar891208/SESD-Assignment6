<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Practical Banking Website</title>
  <style>
    :root{--bg:#f4f7fb;--card:#fff;--accent:#2563eb;--muted:#6b7280}
    body{font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;background:var(--bg);margin:0;padding:32px;color:#111}
    .container{max-width:980px;margin:0 auto}
    .header{display:flex;align-items:center;gap:16px;margin-bottom:20px}
    .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 6px 18px rgba(16,24,40,0.06)}
    h1{margin:0;font-size:20px}
    form{display:grid;grid-template-columns:1fr 140px 140px;gap:10px;align-items:end}
    label{font-size:13px;color:var(--muted)}
    input,select{width:100%;padding:8px;border-radius:8px;border:1px solid #e6e9ef}
    button{padding:8px 12px;border-radius:8px;border:0;background:var(--accent);color:white;cursor:pointer;font-size:14px}
    .grid{display:grid;grid-template-columns:1fr 320px;gap:16px;margin-top:16px}
    .accounts-list{display:flex;flex-direction:column;gap:10px}
    .acct{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;border:1px solid #eef2ff}
    .small{font-size:13px;color:var(--muted)}
    .controls{display:flex;gap:6px}
    .muted{color:var(--muted)}
    .note{font-size:13px;color:#0f172a88;margin-top:10px}
    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}
    table{width:100%;border-collapse:collapse;margin-top:10px}
    th,td{border:1px solid #e6e9ef;padding:6px;text-align:left;font-size:13px}
    th{background:#f9fafb}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="card" style="padding:14px;display:flex;align-items:center;gap:12px">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.5L12 5l9 5.5" stroke="#2563eb" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
        <div>
          <h1>Practical Banking Website</h1>
          <div class="small">Factory Method demo with transaction history</div>
        </div>
      </div>
    </div>

    <div class="card">
      <form id="createForm">
        <div>
          <label for="holder">Account Holder Name</label>
          <input id="holder" required placeholder="e.g. Priya Sharma" />
        </div>
        <div>
          <label for="type">Account Type</label>
          <select id="type">
            <option value="savings">Savings Account</option>
            <option value="current">Current Account</option>
            <option value="loan">Loan Account</option>
          </select>
        </div>
        <div>
          <label for="balance">Initial Amount (₹)</label>
          <input id="balance" type="number" min="0" value="1000" />
        </div>
        <div style="grid-column:1/-1;display:flex;justify-content:flex-end;margin-top:8px">
          <button type="submit">Create Account</button>
        </div>
      </form>

      <div class="grid">
        <div>
          <h3 class="small" style="margin-bottom:8px">Accounts</h3>
          <div id="accounts" class="accounts-list"></div>
        </div>

        <div>
          <h3 class="small">Transactions</h3>
          <div id="transactions"></div>
        </div>
      </div>

      <footer>Practical demo — extend with backend, authentication, and real DB integration.</footer>
    </div>
  </div>

  <script>
    class Account {
      constructor(holder, balance = 0) {
        this.id = Account._nextId++;
        this.holder = holder;
        this.balance = Number(balance) || 0;
        this.createdAt = new Date();
        this.transactions = [];
      }
      deposit(amount) {
        amount = Number(amount);
        if (amount <= 0) throw new Error('Amount must be positive');
        this.balance += amount;
        this.transactions.push({date:new Date(),type:'Deposit',amount});
        return this.balance;
      }
      withdraw(amount) {
        amount = Number(amount);
        if (amount <= 0) throw new Error('Amount must be positive');
        if (amount > this.balance) throw new Error('Insufficient funds');
        this.balance -= amount;
        this.transactions.push({date:new Date(),type:'Withdraw',amount});
        return this.balance;
      }
      getInfo() {
        return {id:this.id,holder:this.holder,balance:this.balance,type:this.constructor.name,createdAt:this.createdAt};
      }
    }
    Account._nextId = 1;

    class SavingsAccount extends Account {
      constructor(holder, balance, interestRate = 0.04) {
        super(holder, balance);
        this.interestRate = interestRate;
      }
    }

    class CurrentAccount extends Account {
      constructor(holder, balance, overdraftLimit = 5000) {
        super(holder, balance);
        this.overdraftLimit = overdraftLimit;
      }
      withdraw(amount) {
        amount = Number(amount);
        if (amount <= 0) throw new Error('Amount must be positive');
        if (amount > this.balance + this.overdraftLimit) throw new Error('Exceeds overdraft limit');
        this.balance -= amount;
        this.transactions.push({date:new Date(),type:'Withdraw',amount});
        return this.balance;
      }
    }

    class LoanAccount extends Account {
      constructor(holder, loanAmount, interestRate = 0.10) {
        super(holder, Number(loanAmount));
        this.interestRate = interestRate;
        this.isLoan = true;
      }
      deposit(amount) {
        amount = Number(amount);
        if (amount <= 0) throw new Error('Amount must be positive');
        this.balance -= amount;
        if (this.balance < 0) this.balance = 0;
        this.transactions.push({date:new Date(),type:'Loan Repayment',amount});
        return this.balance;
      }
      withdraw() { throw new Error('Withdrawals not allowed from Loan Account'); }
    }

    class AccountFactory {
      static create(type, holder, amount) {
        switch(type){
          case 'savings': return new SavingsAccount(holder, amount);
          case 'current': return new CurrentAccount(holder, amount);
          case 'loan': return new LoanAccount(holder, amount);
          default: throw new Error('Unknown type');
        }
      }
    }

    const repository = {accounts:[],add(acc){this.accounts.push(acc);},removeById(id){this.accounts=this.accounts.filter(a=>a.id!==id);},getById(id){return this.accounts.find(a=>a.id===id);}};

    const form=document.getElementById('createForm');
    const accountsEl=document.getElementById('accounts');
    const transactionsEl=document.getElementById('transactions');

    function renderAccounts(){
      accountsEl.innerHTML='';
      if(repository.accounts.length===0){accountsEl.innerHTML='<div class="muted">No accounts yet.</div>';return;}
      repository.accounts.forEach(acc=>{
        const info=acc.getInfo();
        const div=document.createElement('div');
        div.className='acct';
        const left=document.createElement('div');
        left.innerHTML=`<div><strong>${info.holder}</strong> <span class="small">(#${info.id})</span></div><div class="small">${info.type} • ₹${info.balance.toLocaleString()}</div>`;
        const right=document.createElement('div');
        right.className='controls';
        const dep=document.createElement('button');dep.textContent='Deposit';dep.onclick=()=>actionPrompt(acc.id,'deposit');
        const wit=document.createElement('button');wit.textContent='Withdraw';wit.onclick=()=>actionPrompt(acc.id,'withdraw');
        const view=document.createElement('button');view.textContent='View Txn';view.onclick=()=>renderTransactions(acc);
        right.append(dep,wit,view);
        div.append(left,right);
        accountsEl.appendChild(div);
      });
    }

    function renderTransactions(acc){
      const info=acc.getInfo();
      let html=`<strong>${info.holder}</strong> (#${info.id})<br/><table><tr><th>Date</th><th>Type</th><th>Amount (₹)</th></tr>`;
      acc.transactions.forEach(t=>{html+=`<tr><td>${t.date.toLocaleString()}</td><td>${t.type}</td><td>${t.amount}</td></tr>`});
      html+='</table>';
      transactionsEl.innerHTML=html;
    }

    function actionPrompt(id,action){
      const acc=repository.getById(id);if(!acc)return;
      const amt=prompt(`${action} amount for ${acc.holder}`, '1000');
      if(amt===null)return;
      try{if(action==='deposit')acc.deposit(Number(amt));else if(action==='withdraw')acc.withdraw(Number(amt));renderAccounts();renderTransactions(acc);}catch(e){alert(e.message)}
    }

    form.addEventListener('submit',e=>{
      e.preventDefault();
      const holder=document.getElementById('holder').value.trim();
      const type=document.getElementById('type').value;
      const amount=Number(document.getElementById('balance').value)||0;
      try{const acc=AccountFactory.create(type,holder,amount);repository.add(acc);form.reset();document.getElementById('balance').value=1000;renderAccounts();}catch(err){alert(err.message)}});

    repository.add(AccountFactory.create('savings','Asha Kapoor',5000));
    repository.add(AccountFactory.create('current','Ravi Verma',2000));
    repository.add(AccountFactory.create('loan','Kiran Rao',25000));
    renderAccounts();
  </script>
</body>
</html>
